@import "tailwindcss";

@font-face {
  font-family: 'GT Walsheim Pro';
  src: url('/fonts/GTWalsheimPro-Regular.woff') format('woff');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@theme {
  --font-sans: 'GT Walsheim Pro', var(--font-gt-walsheim-pro), system-ui, -apple-system, sans-serif;
  --font-mono: var(--font-geist-mono);
}

:root {
  --background: #080808;
  --foreground: #ffffff;

  /* ПЕРЕМЕННЫЕ ИЗ ТВОИХ СПЕЦИФИКАЦИЙ (ускорил для нативности) */
  --dialog-animation-speed: .35s;
  --backdrop-speed: .3s;
  --backdrop-ease: cubic-bezier(.4, 0, .2, 1);
  --modal-speed: .35s;
  --modal-ease: cubic-bezier(.34, 1.56, .64, 1);
  /* Добавил легкий bounce эффект */
  --close-button-speed: .3s;
  --close-button-ease: cubic-bezier(.4, 0, .2, 1);
  --content-speed: .3s;
  --content-ease: cubic-bezier(.4, 0, .2, 1);
  --content-stagger: .05s;

  /* Telegram Viewport Variables */
  --tg-viewport-height: 100vh;
  --tg-viewport-stable-height: 100vh;
}

html {
  font-family: var(--font-gt-walsheim-pro), 'GT Walsheim Pro', system-ui, -apple-system, sans-serif !important;
}

html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: var(--background);
  /* Отключаем стандартный pull-to-refresh, чтобы он не мешал Telegram */
  overscroll-behavior-y: none;
  font-family: var(--font-gt-walsheim-pro), 'GT Walsheim Pro', system-ui, -apple-system, sans-serif !important;
}

body {
  color: var(--foreground);
  min-height: var(--tg-viewport-height, 100vh);
  display: flex;
  flex-direction: column;
}

/* Применяем шрифт ко всем элементам по умолчанию */
*,
*::before,
*::after {
  font-family: inherit;
}

/* Убеждаемся, что все текстовые элементы используют шрифт */
p, h1, h2, h3, h4, h5, h6, span, div, button, a, input, textarea, select, label {
  font-family: var(--font-gt-walsheim-pro), 'GT Walsheim Pro', system-ui, -apple-system, sans-serif !important;
}

/* Контейнер приложения для корректного скролла */
.app-viewport {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  display: flex;
  flex-direction: column;
}

body.modal-open .app-viewport {
  overflow: hidden !important;
}

/* Класс для учета безопасных зон, который можно добавить к любому контейнеру с фоном */
.safe-area-padding {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

.bg-main-gradient {
  background: radial-gradient(202.31% 106.32% at 50% 100%, #C23E1D 0%, #141414 100%) !important;
}

/* --- СТИЛИ ИЗ css-dialog-styles --- */
.css-dialog {
  position: fixed;
  inset: 0;
  z-index: 50;
  display: flex;
  align-items: flex-end;
  justify-content: center;
}

.css-dialog:not(.open) {
  pointer-events: none;
  visibility: hidden;
  transition: visibility 0s linear var(--dialog-animation-speed);
}

/* Backdrop */
.css-dialog_backdrop {
  position: absolute;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(4px);
  opacity: 0;
  transition: opacity var(--backdrop-speed) var(--backdrop-ease);
}

.css-dialog.open .css-dialog_backdrop {
  opacity: 1;
}

/* Inner Modal */
.css-dialog_inner {
  position: relative;
  width: 100%;
  max-width: 32rem;
  /* max-w-lg */
  background-color: rgba(18, 18, 18, 1);
  border-top-left-radius: 16px;
  border-top-right-radius: 16px;
  contain: content;
  transform: translate3d(0, 100%, 0);
  transition: transform var(--modal-speed) var(--modal-ease);
  will-change: transform;
  font-family: 'GT Walsheim Pro', var(--font-sans, system-ui, sans-serif);
}

.css-dialog.no-transition .css-dialog_inner {
  transition: none !important;
}

.css-dialog.open .css-dialog_inner {
  /* По умолчанию 0, но может перекрываться inline-стилем при свайпе */
  transform: translate3d(0, var(--ty, 0), 0);
}

/* Content Items Stagger */
.css-dialog_content-item {
  opacity: 0;
  transform: translate3d(0, 1.25rem, 0);
  transition: transform var(--content-speed) var(--content-ease), opacity var(--content-speed) var(--content-ease);
  content-visibility: auto;
  contain: layout style paint;
  backface-visibility: hidden;
  /* Оптимизация производительности */
  will-change: transform, opacity;
}

.css-dialog.open .css-dialog_content-item {
  opacity: 1;
  transform: translate3d(0, 0, 0);
  transition-delay: calc((var(--dialog-animation-speed) - .2s) + var(--content-stagger) * (var(--index) - 1));
}

/* Custom Scrollbar */
.custom-scrollbar::-webkit-scrollbar {
  width: 4px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
}