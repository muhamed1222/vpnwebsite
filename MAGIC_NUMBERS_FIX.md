# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —á–∏—Å–µ–ª

## –î–∞—Ç–∞: 2025-01-27

---

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–í –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –º–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –±–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç:

- `setTimeout(..., 500)`, `2000`, `1000` - –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è
- `MAX_POLL_ATTEMPTS = 30` - –ø–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ 30?
- `60 * 60 * 24 * 1000` - 24 —á–∞—Å–∞, –Ω–æ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö (–º—Å –∏ —Å–µ–∫)
- `2 * 60 * 1000`, `5 * 60 * 1000` - —Ç–∞–π–º–∞—É—Ç—ã API, –Ω–æ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–í—ã–Ω–µ—Å–µ–Ω—ã –≤—Å–µ –º–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ `lib/constants.ts`:

### 1. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –∑–∞–¥–µ—Ä–∂–µ–∫ (DELAYS)

```typescript
export const DELAYS = {
  COPY_FEEDBACK: 2000,              // 2 —Å–µ–∫—É–Ω–¥—ã - –≤—Ä–µ–º—è –ø–æ–∫–∞–∑–∞ "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ"
  PAYMENT_REDIRECT: 1000,           // 1 second - –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º –Ω–∞ –æ–ø–ª–∞—Ç—É
  POLLING_RESET: 2500,              // 2.5 seconds - –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Å–±—Ä–æ—Å–æ–º –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–ª–∏–Ω–≥–∞
  MODAL_CLOSE_ANIMATION: 150,       // 150ms - –∞–Ω–∏–º–∞—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª–∫–∏
  CONTEST_REFRESH: 4000,            // 4 seconds - –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∫–æ–Ω–∫—É—Ä—Å–∞
  POLLING_INTERVAL: 2000,           // 2 seconds - –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞
  MAX_POLL_ATTEMPTS: 30,            // 30 –ø–æ–ø—ã—Ç–æ–∫ = 1 –º–∏–Ω—É—Ç–∞ (30 * 2 —Å–µ–∫—É–Ω–¥—ã)
  CONTEST_CHECK_INTERVAL: 1000,     // 1 second - –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞—á–∞–ª–∞ –∫–æ–Ω–∫—É—Ä—Å–∞
} as const;
```

### 2. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —Å–µ—Å—Å–∏–π (SESSION_CONFIG)

```typescript
export const SESSION_CONFIG = {
  MAX_AGE_MS: 60 * 60 * 24 * 1000,  // 24 —á–∞—Å–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
  MAX_AGE_SECONDS: 60 * 60 * 24,    // 24 —á–∞—Å–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
} as const;
```

### 3. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (CACHE_CONFIG)

```typescript
export const CACHE_CONFIG = {
  CONTEST_ACTIVE: 60,               // 60 seconds - –≤—Ä–µ–º—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–Ω–∫—É—Ä—Å–∞
} as const;
```

### 4. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —Ç–∞–π–º–∞—É—Ç–æ–≤ API (API_TIMEOUTS)

```typescript
export const API_TIMEOUTS = {
  GET_REFERRAL_STATS: 2 * 60 * 1000,       // 2 –º–∏–Ω—É—Ç—ã
  GET_REFERRAL_HISTORY: 2 * 60 * 1000,     // 2 –º–∏–Ω—É—Ç—ã
  GET_PAYMENTS_HISTORY: 2 * 60 * 1000,     // 2 –º–∏–Ω—É—Ç—ã
  GET_AUTORENEWAL: 60 * 1000,              // 1 –º–∏–Ω—É—Ç–∞
  GET_USER_STATUS: 1 * 60 * 1000,          // 1 –º–∏–Ω—É—Ç–∞
  GET_USER_CONFIG: 2 * 60 * 1000,          // 2 –º–∏–Ω—É—Ç—ã
  GET_TARIFFS: 5 * 60 * 1000,              // 5 –º–∏–Ω—É—Ç
  GET_CONTEST_ACTIVE: 60 * 1000,           // 1 –º–∏–Ω—É—Ç–∞
  GET_CONTEST_SUMMARY: 1 * 60 * 1000,      // 1 –º–∏–Ω—É—Ç–∞
  GET_CONTEST_FRIENDS: 1 * 60 * 1000,      // 1 –º–∏–Ω—É—Ç–∞
  GET_CONTEST_TICKETS: 1 * 60 * 1000,      // 1 –º–∏–Ω—É—Ç–∞
} as const;
```

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. ‚úÖ **PurchaseConfirmModal.tsx**
   - `MAX_POLL_ATTEMPTS = 30` ‚Üí `DELAYS.MAX_POLL_ATTEMPTS`
   - `setTimeout(..., 2500)` ‚Üí `DELAYS.POLLING_RESET`
   - `setInterval(..., 2000)` ‚Üí `DELAYS.POLLING_INTERVAL`
   - `setTimeout(..., 1000)` ‚Üí `DELAYS.PAYMENT_REDIRECT`

2. ‚úÖ **ReferralModal.tsx**
   - `setTimeout(..., 2000)` ‚Üí `DELAYS.COPY_FEEDBACK`

3. ‚úÖ **VpnKeyCode.tsx**
   - `setTimeout(..., 2000)` ‚Üí `DELAYS.COPY_FEEDBACK`

4. ‚úÖ **contest/page.tsx**
   - `setTimeout(..., 4000)` ‚Üí `DELAYS.CONTEST_REFRESH`
   - `setInterval(..., 1000)` ‚Üí `DELAYS.CONTEST_CHECK_INTERVAL`

### –•—É–∫–∏

5. ‚úÖ **useTelegramWebApp.ts**
   - `setTimeout(..., 150)` ‚Üí `DELAYS.MODAL_CLOSE_ANIMATION`

### –£—Ç–∏–ª–∏—Ç—ã

6. ‚úÖ **admin-session.ts**
   - `60 * 60 * 24 * 1000` ‚Üí `SESSION_CONFIG.MAX_AGE_MS`
   - `60 * 60 * 24` ‚Üí `SESSION_CONFIG.MAX_AGE_SECONDS`

7. ‚úÖ **api.ts**
   - –í—Å–µ —Ç–∞–π–º–∞—É—Ç—ã –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `API_TIMEOUTS.*`
   - `2 * 60 * 1000` ‚Üí `API_TIMEOUTS.GET_REFERRAL_STATS`
   - `5 * 60 * 1000` ‚Üí `API_TIMEOUTS.GET_TARIFFS`
   - `60 * 1000` ‚Üí `API_TIMEOUTS.GET_AUTORENEWAL`
   - –ò —Ç.–¥.

### API Routes

8. ‚úÖ **contest/active/route.ts**
   - `revalidate: 60` ‚Üí `CACHE_CONFIG.CONTEST_ACTIVE`

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –í—ã–Ω–µ—Å–µ–Ω–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç:

- **DELAYS**: 8 –∫–æ–Ω—Å—Ç–∞–Ω—Ç
- **SESSION_CONFIG**: 2 –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- **CACHE_CONFIG**: 1 –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞
- **API_TIMEOUTS**: 11 –∫–æ–Ω—Å—Ç–∞–Ω—Ç

**–í—Å–µ–≥–æ:** 22 –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

### –ó–∞–º–µ–Ω–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π:

- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: 7 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π
- **–•—É–∫–∏**: 1 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- **–£—Ç–∏–ª–∏—Ç—ã**: 3 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **API**: 11 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π
- **API Routes**: 1 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**–í—Å–µ–≥–æ:** 23+ –∑–∞–º–µ–Ω—ã

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚ùå –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –±–µ–∑ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π
- ‚ùå –°–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è
- ‚ùå –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ –í—Å–µ –º–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ `lib/constants.ts`
- ‚úÖ –õ–µ–≥–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∏:

- ‚úÖ –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞
- ‚úÖ –õ–∏–Ω—Ç–µ—Ä: 0 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- ‚úÖ –¢–µ—Å—Ç—ã: 66/66 –ø—Ä–æ–π–¥–µ–Ω–æ

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

- ‚úÖ –í—Å–µ —Ç–∞–π–º–∞—É—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ó–∞–¥–µ—Ä–∂–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–∂–∏–¥–∞–µ—Ç—Å—è
- ‚úÖ –°–µ—Å—Å–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ

–í—Å–µ –º–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ `lib/constants.ts`.

---

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —á–∏—Å–µ–ª*
